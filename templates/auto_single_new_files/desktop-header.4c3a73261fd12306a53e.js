/*! For license information please see desktop-header.4c3a73261fd12306a53e.js.LICENSE.txt */
"use strict";(self["webpackChunkavito_desktop_site"]=self["webpackChunkavito_desktop_site"]||[]).push([[7215],{35665:function(e,t,n){n.d(t,{Z:function(){return Ct}});var r=n(84481),a=n.n(r),l=n(89645),o=n(59692),i=n(64167),c=n(22854),s=n(45972),u=n(55095),m=n(82444);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p="notifications-counter",h="/js/notifications/count?platform=desktop",v=5*60*1e3,g="profile-notifications";var E=function(){function e(t){var n=t.userId,r=t.currentPage,a=t.updateUI;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"currentPage",void 0),f(this,"updateUI",void 0),f(this,"userId",void 0),this.userId=n,this.updateUI=a,this.currentPage=r,this.checkCurrentUserData(),this.subscribeVisibilityChange(),this.subscribeLocalStorageChange(),document.hidden||(this.isNotificationsPage()?this.resetCounter():this.init())}var t,n,r;return t=e,(n=[{key:"checkCurrentUserData",value:function(){var e=localStorage.getItem(p);if(e)try{JSON.parse(e).userId!==this.userId&&localStorage.removeItem(p)}catch(t){}}},{key:"subscribeVisibilityChange",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(e.isNotificationsPage()?e.resetCounter():e.init())}))}},{key:"subscribeLocalStorageChange",value:function(){var e=this;window.addEventListener("storage",(function(t){if(t.key===p&&t.newValue)try{var n=JSON.parse(t.newValue);e.updateUI(n.unread)}catch(r){}}))}},{key:"init",value:function(){var e,t=null,n=localStorage.getItem(p);if(n)try{t=JSON.parse(n)}catch(r){}t?(e=t.timestamp,Date.now()-e>=v?(localStorage.removeItem(p),this.fetchCounterData()):this.updateUI(t.unread)):this.fetchCounterData()}},{key:"resetCounter",value:function(){localStorage.removeItem(p);var e={userId:this.userId,timestamp:Date.now(),unread:0};localStorage.setItem(p,JSON.stringify(e))}},{key:"fetchCounterData",value:function(){var e=this;fetch(h,{credentials:"same-origin",headers:{Accept:"application/json"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){var n=t.unread;e.updateUI(n);var r={userId:e.userId,timestamp:Date.now(),unread:n};localStorage.setItem(p,JSON.stringify(r))})).catch((function(){}))}},{key:"isNotificationsPage",value:function(){return this.currentPage===g}}])&&d(t.prototype,n),r&&d(t,r),e}(),y=n(82662),k=n(84921),b=n(94627),C="PRO_ONBOARDING_HAS_BEEN_SHOWN",N=n(35258),S=n(94184),w=n.n(S),_=n(82640),I=n(21522),A=n(38646),x=n(45536),O=n(87271),P=n(55929),L=n(81238),j=n(1705),z=n(70399),T=n(14204),M=n(3982),R=n(54377),U=n(48515),B=n(40905),Z=n(33027),V=n(81020),F=n(63968),D=function(e){var t=e.size;return r.createElement("svg",{version:"1",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},viewBox:"0 0 36 36"},r.createElement("path",{fill:"currentColor",d:"M17.1 5.4L13.9 14l-9.2.3c-1.3.1-1.3 1.2-.6 1.8l7.2 5.7-2.5 8.8c-.4 1.1.7 1.6 1.5 1.1l7.6-5.1 7.6 5.1c.6.4 1.8.2 1.5-1.1l-2.5-8.8 7.2-5.7c.8-.7.8-1.7-.6-1.8l-9-.3L19 5.4c-.5-1.1-1.5-1.1-1.9 0z"}))},H=r.memo(D),W="index-active-_a9kp",G="index-half-star-Jc0O_",J="index-star-F_T58",$="index-with-hover-effect-YOuq9";function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){var t=e.currentRatingValue,n=void 0===t?0:t,a=e.marker,l=e.markerId,o=e.minRatingValues,i=e.onClick,c=e.onMouseEnter,s=e.size,u=e.value,m=e.withHoverEffect;return r.createElement("li",{className:w()(J,q({},$,m)),"data-marker":a+l,onClick:function(){i&&i(u)},onMouseEnter:function(){c&&c(u)}},r.createElement("div",{className:w()(n>o[1]&&W)},r.createElement(H,{size:s})),r.createElement("div",{className:w()(G,n>o[0]&&W)},r.createElement(H,{size:s})))},Y=r.memo(X),K="index-root-pDqqP";function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=[{minRatingValues:[0,0],value:1},{minRatingValues:[1.2,1.7],value:2},{minRatingValues:[2.2,2.7],value:3},{minRatingValues:[3.2,3.7],value:4},{minRatingValues:[4.2,4.7],value:5}],ne=function(e){var t=e.marker,n=e.onChange,a=e.size,l=e.value,o=void 0===l?0:l,i=e.withHoverEffect,c=Q(r.useState(o),2),s=c[0],u=c[1],m=function(e){n&&n(e)},d=function(e){i&&u(e)};return r.createElement("ul",{className:K,"data-marker":t,onMouseLeave:function(){i&&u(0)}},te.map((function(e,n){return r.createElement(Y,{key:e.value,currentRatingValue:s,marker:t+"/star",markerId:n,minRatingValues:e.minRatingValues,size:a,value:e.value,withHoverEffect:i,onClick:m,onMouseEnter:d})})))},re=r.memo(ne),ae=n(87111);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t=e.className,n=e.children,a=le(r.useState(!1),2),l=a[0],o=a[1],i=r.useRef(null),c=(0,ae.k)(l),s=c.purchases+c.sales+(0,u.A)();return r.useEffect((function(){var e=i.current;if(!e)return function(){};var t=new IntersectionObserver((function(e){e.some((function(e){return e.isIntersecting}))&&(o(!0),t.disconnect())}));return t.observe(e),function(){t.disconnect()}}),[o]),r.createElement("li",{ref:i,className:t,"data-marker":"header/tooltip-list-item"},n({actionOrdersCount:s}))},ce="index-root-zEAcT",se="index-group-dOvAx",ue="index-profile-nav-item-_1GCu",me="index-profile-nav-item_value-__w0G",de="index-profile-nav-item_entirely-hAeXg",fe="index-profile-nav-item_exit-HGwrS",pe="index-profile-nav-item-bonus-Rxa6V",he="index-link-grow-yd1pn",ve="index-rating-line-sXrT0",ge="index-stars-_jrjX",Ee="index-pro-lk-nav-item-BioMu",ye="index-pro-lk-label-_b0B0",ke="index-pro-lk-icon-GpUC_",be="index-pro-lk-onboarding-erkUs";function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=["бонус","бонуса","бонусов"],we="https://ipoteka.avito.ru",_e=function(e){return"".concat((0,R.WU)(e)," ₽")},Ie=function(e){return"".concat((0,R.WU)(e)," ").concat((0,M.H)(e,Se))},Ae=function(e){var t,n,l,o,i=e.headerInfo,c=e.hierarchy,s=e.userAccount,u=e.currentPage,m=e.handlers,d=e.host,f=void 0===d?"":d,p=e.unreadFavoritesCount,h=e.unreadMessengerCount,v=e.unreadNotificationsCount,g=e.user,E=e.isSpaEnabled,y=e.isOpened,b=e.ProfileSwitchComponent,S=Ce((0,r.useState)(!1),2),A=S[0],x=S[1],O=(null==s?void 0:s.isSeparationBalance)&&s.balance.bonus,P=O||(null==g||null===(t=g.tariffInfo)||void 0===t?void 0:t.isVisible),L=(null==g||null===(n=g.tariffInfo)||void 0===n?void 0:n.isActive)||(null==c?void 0:c.isEmployee);(0,r.useEffect)((function(){var e="PRO_ENTRY_POINT_EVENT_HAS_BEEN_SENT";!sessionStorage.getItem(e)&&y&&(k.Z.sendEvent(6573,1,{has_onboarding:Boolean(null==g?void 0:g.hasProWelcomeOnboarding)}),sessionStorage.setItem(e,"1"))}),[y,g]),(0,r.useEffect)((function(){null===localStorage.getItem(C)&&null!=g&&g.hasProWelcomeOnboarding&&x(!0)}),[g]);var j,z,T=function(){return a().createElement("li",{className:ue,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:he},a().createElement(Z.r,{href:"".concat(f,"/account")},"Кошелёк")),a().createElement("div",{className:me,"data-marker":"header/wallet-value"},s?_e(O?s.balance.real:s.balance.total):null,s&&O?a().createElement("span",{className:pe},Ie(s.balance.bonus)):null))};return a().createElement("ul",{className:ce,"data-marker":"header/tooltip-list"},function(){if(null==i||!i.rating)return null;var e,t=i.rating,n=a().createElement("div",{className:ve},(void 0!==t.scoreFloat||void 0!==t.score)&&a().createElement(a().Fragment,null,a().createElement(U.c,{size:"s"},(e=t.scoreFloat||t.score||0,Number(e).toFixed(1).replace(".",","))),a().createElement("span",{className:ge},a().createElement(re,{value:t.scoreFloat||t.score||0,marker:"stars",size:"20px"}))),a().createElement(B.D,{size:"s"},t.summary));return"ratings"===u?a().createElement(B.D,null,n):a().createElement("div",{className:se},a().createElement(Z.r,{href:"".concat(f,"/profile/rating?page_from=profile_menu")},n))}(),L&&a().createElement("div",{className:se},(z=null!=c&&c.isEmployee?"https://pro.avito.ru/":"https://pro.avito.ru/?utm_source=avito&utm_medium=organic&utm_content=top_menu_link",a().createElement("li",{className:w()(ue,Ee)},a().createElement(a().Fragment,null,a().createElement("div",{className:he},a().createElement(Z.r,{href:z,target:"_blank",rel:"noopener noreferrer",onClick:null==m?void 0:m.handleProClick},a().createElement("div",{className:ye},a().createElement(B.D,null,"Кабинет")," ",a().createElement("div",{className:ke}),A&&a().createElement("div",{className:be},a().createElement(I.E,{size:"s"}))))),(null==c?void 0:c.isEmployee)&&(null==c?void 0:c.companyName)&&a().createElement(V.P,{size:"xs",noAccent:!0},"сотрудник компании «",c.companyName,"»"))))),a().createElement("div",{className:se},a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile")},"Мои объявления"):a().createElement(N.Link,{to:"/profile",component:Z.r},"Мои объявления")),a().createElement(ie,{className:ue},(function(e){var t=e.actionOrdersCount;return a().createElement(a().Fragment,null,a().createElement("div",{className:he},f||!E?a().createElement(Z.r,{href:"".concat(f,"/orders/sales?source=shortcut")},"Заказы"):a().createElement(N.Link,{to:"/orders/sales?source=shortcut",component:Z.r},"Заказы")),t?a().createElement(_.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}):null)})),(j="?page_from=profile_menu",a().createElement("li",{className:w()(ue,de)},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/contacts").concat(j)},"Мои отзывы"):a().createElement(N.Link,{to:"/profile/contacts".concat(j),component:Z.r},"Мои отзывы"))),a().createElement("li",{className:ue,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:he},f||!E?a().createElement(Z.r,{href:"".concat(f,"/favorites"),"data-marker":"header/username-tooltip/favorites"},"Избранное"):a().createElement(N.Link,{to:"/favorites",component:Z.r,"data-marker":"header/username-tooltip/favorites"},"Избранное")),p?a().createElement(B.D,{color:"gray44","data-marker":"header/username-tooltip/favorites/count"},p):null)),a().createElement("div",{className:se},a().createElement("li",{className:ue,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:he},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/messenger"),onClick:null==m?void 0:m.handleMessengerClick},"Сообщения"):a().createElement(N.Link,{to:"/profile/messenger",component:Z.r,onClick:null==m?void 0:m.handleMessengerClick},"Сообщения")),h?a().createElement(B.D,{color:"gray44"},h):null),g?a().createElement("li",{className:ue,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:he},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/notifications")},"Уведомления"):a().createElement(N.Link,{to:"/profile/notifications",component:Z.r},"Уведомления")),v?a().createElement(B.D,{color:"gray44"},v):null):null),P?a().createElement(a().Fragment,null,a().createElement("div",{className:se},T()),null!=g&&null!==(l=g.tariffInfo)&&void 0!==l&&l.isVisible?a().createElement("div",{className:se},null!=g&&g.tariffInfo?a().createElement("li",{className:ue,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:he},a().createElement(Z.r,{href:"".concat(f).concat(g.tariffInfo.url)},g.tariffInfo.name)),g.tariffInfo.isActive&&g.tariffInfo.hasBalance?a().createElement("div",{className:me,"data-marker":"header/wallet-value"},_e(g.tariffInfo.balanceLeft),g.tariffInfo.hasBonuses?a().createElement("span",{className:pe},Ie(g.tariffInfo.bonusesLeft)):null):null):null):null):null,a().createElement("div",{className:se},P?null:T(),a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},a().createElement(Z.r,{href:"".concat(f,"/paid-services/listing-fees")},"Платные услуги")),null==g||!g.isLegal||g.hasShopSubscription||null!=g&&g.hasAvitoPro?null:a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},a().createElement(Z.r,{href:"".concat(f,"/account/documents")},"Бухгалтерия")),function(){if(null!=g&&g.hasShopSubscription||null!=g&&g.isLegal&&null!=g&&g.hasAvitoPro){var e,t="/professionals/accounting";return null!=g&&null!==(e=g.tariffInfo)&&void 0!==e&&e.isVisible?t="/professionals/employees":g.hasShopSubscription&&(t="/professionals/tariff"),a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},a().createElement(Z.r,{href:"".concat(f).concat(t)},"Для профессионалов"))}return null}(),a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/campaigns?source=shortcut")},"Спецпредложения"):a().createElement(N.Link,{to:"/profile/campaigns?source=shortcut",component:Z.r},"Спецпредложения")),function(){if(null==g||!g.mortgageAccount)return null;var e=g.mortgageAccount.title;return a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},a().createElement(Z.r,{href:we,rel:"noopener noreferrer",target:"_blank",onClick:null==m?void 0:m.handleMortgageAccountLinkClick},e," ",a().createElement(F.r,null)))}(),function(){if(null==g||!g.loyaltyPreferences)return null;var e=g.loyaltyPreferences,t=e.tag,n=e.title;return a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/loyalty?source=header.menu")},n,t&&a().createElement(a().Fragment,null," ",a().createElement(_.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}))):a().createElement(N.Link,{to:"/loyalty?source=header.menu",component:Z.r},n,t&&a().createElement(a().Fragment,null," ",a().createElement(_.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}))))}()),a().createElement("div",{className:se},a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/basic")},"Управление профилем"):a().createElement(N.Link,{to:"/profile/basic",component:Z.r},"Управление профилем")),a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/safety")},"Защита профиля"):a().createElement(N.Link,{to:"/profile/safety",component:Z.r},"Защита профиля")),a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/settings")},"Настройки"):a().createElement(N.Link,{to:"/profile/settings",component:Z.r},"Настройки")),a().createElement("li",{className:w()(ue,de),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(Z.r,{href:"".concat(f,"/profile/settings/delivery")},"Авито Доставка"):a().createElement(N.Link,{to:"/profile/settings/delivery",component:Z.r},"Авито Доставка"))),(null==g||null===(o=g.passport)||void 0===o?void 0:o.isFeatureEnabled)&&b&&a().createElement("div",{className:se},a().createElement(b,{user:g})),a().createElement("div",{className:se},a().createElement("li",{className:w()(ue,de,fe),"data-marker":"header/tooltip-list-item"},a().createElement(Z.r,{href:"".concat(f,"/profile/exit"),onClick:null==m?void 0:m.handleSecuredTouchLogout},"Выйти"))))},xe=a().memo(Ae),Oe=n(4997),Pe=n.n(Oe),Le="index-root-_NPPn",je="index-sticky-TtGd0",ze="index-inner-iPEdy",Te="index-nav-r2kHM",Me="index-nav-item-_YcoS",Re="index-nav-link-muv1u",Ue="index-counters-m9aGk",Be="index-counter-UxPCj",Ze="index-badge-fa5Hq",Ve="index-profile-_4ijp",Fe="index-login-NV2z_",De="index-username-bKfaE",He="index-dropdown-popup_left-_cWDR",We="index-dropdown-popup_right-HBVky",Ge="index-avatar-UX8pb",Je="index-dropdown-g0_IH",$e="index-dropdown-popup-_vvgA",qe="index-profile-menu-dropdown-n1Rc9",Xe="index-add-button-wrapper-s0SLe",Ye="index-narrowLayout-_YlhA",Ke="index-wideLayout-Q6G39",Qe="index-nav-catalogs-bsSOl",et="index-nav-catalog-link-N33oX",tt="index-nav-catalog-item-JUgGq",nt="index-responsive-N4Ry5",rt=(0,r.memo)((function(e){var t=e.catalogs,n=e.onClick,l=(0,r.useCallback)((function(e){switch(e.currentTarget.dataset.catalogSlug){case"catalog_auto":Pe().set("comparison_from_page","main_menu",{expires:1});break;case"catalog_novostroyki":k.Z.sendEvent(6601,2,{node_type:"main_menu",target_page:e.currentTarget.href})}n&&n(e)}),[n]);return a().createElement("li",{className:w()(Me,Je)},a().createElement("span",{className:w()(Re,et)},"Каталоги"," ",a().createElement(T.U,{rotate:180})),a().createElement("div",{className:w()($e,Qe)},t.map((function(e){return a().createElement("div",{key:e.slug,className:tt},a().createElement(Z.r,{href:e.link,"data-catalog-slug":e.slug,onClick:l},e.title))}))))}));function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.addButtonText,n=void 0===t?"Разместить объявление":t,l=e.userAccount,o=e.catalogs,i=e.headerInfo,c=e.hierarchy,s=e.cartCount,u=e.profileCount,m=e.currentPage,d=e.handlers,f=e.hasAddButton,p=e.host,h=void 0===p?"":p,v=e.isCartOnboarding,g=e.isResponsive,E=e.isNarrowLayout,y=e.isWideLayout,k=e.isSticky,b=e.isSpaEnabled,C=e.servicesClassName,S=e.unreadFavoritesCount,M=e.unreadMessengerCount,R=e.unreadNotificationsCount,U=e.user,B=e.isAvitoCare,Z=void 0===B||B,V=e.ProfileSwitchComponent,F=e.ProfileMenuComponent,D=e.isOneStopPlace,H=lt((0,r.useState)(!1),2),W=H[0],G=H[1],J=function(){return a().createElement("div",{className:Ue},a().createElement("a",{className:Be,href:"".concat(h,"/favorites"),title:"Избранное","data-marker":"header/favorites",onClick:null==d?void 0:d.handleFavoritesClick},a().createElement(_.C.Over,{gap:!0,gapSize:1,gapColor:"gray84",count:S,size:"s",snapTop:-2,snapRight:-5,badge:a().createElement(_.C,{className:Ze,"data-marker":"header/favorites-counter"})},a().createElement(P.P,{color:"gray44",colorHover:"gray28",size:24}))),U?a().createElement("a",{className:Be,href:"".concat(h,"/profile/notifications"),title:"Уведомления","data-marker":"header/notifications"},a().createElement(_.C.Over,{gap:!0,gapSize:1,gapColor:"gray84",count:R,size:"s",snapTop:-2,snapRight:-5,badge:a().createElement(_.C,{className:Ze,"data-marker":"header/unread-notifications-counter"})},a().createElement(L.l,{color:"gray44",colorHover:"gray28",size:24}))):null,U?a().createElement("a",{className:Be,href:"".concat(h,"/profile/messenger"),title:"Сообщения","data-marker":"header/messenger",onClick:null==d?void 0:d.handleMessengerClick},a().createElement(_.C.Over,{gap:!0,gapSize:1,gapColor:"gray84",count:M,size:"s",snapTop:-2,snapRight:-5,badge:a().createElement(_.C,{className:Ze,"data-marker":"header/unread-chats-counter"})},a().createElement(j.P,{color:"gray44",colorHover:"gray28",size:24}))):null,(e=U?"".concat(h,"/order/cart"):"#login?next=/order/cart",a().createElement("a",{className:Be,href:e,title:"Корзина","data-marker":"header/cart",onClick:null==d?void 0:d.handleCartClick},U?a().createElement(a().Fragment,null,s?a().createElement(_.C.Over,{gap:!0,gapSize:1,gapColor:"gray84",count:s,size:"s",snapTop:-2,snapRight:-5,badge:a().createElement(_.C,{className:Ze,"data-marker":"header/cart-counter"})},a().createElement(z.w,{color:"gray44",colorHover:"gray28",size:24})):a().createElement(I.E.Over,{show:v,gap:!0,gapSize:1,gapColor:"gray84",snapTop:-2,snapRight:-2},a().createElement(z.w,{color:"gray44",colorHover:"gray28",size:24}))):a().createElement(z.w,{color:"gray44",colorHover:"gray28",size:24}))));var e},$=function(){var e;return U?a().createElement("div",{className:w()(De,Je),"data-marker":"header/menu-profile"},a().createElement("a",{href:"".concat(h,"/profile"),className:w()(Re,"ym-hide-content"),"data-marker":"header/username-button",onMouseEnter:function(){return G(!0)},onTouchStart:function(){return G(!0)},onMouseLeave:function(){return G(!1)},onTouchEnd:function(){return G(!1)}},U.avatar?a().createElement(_.C.Over,{gap:!0,gapSize:1,gapColor:"gray84",count:u,size:"s",snapTop:0,snapRight:3,badge:a().createElement(_.C,{className:Ze,"data-marker":"header/profile-counter"})},a().createElement("img",{className:Ge,src:U.avatar.url,alt:"Аватар",onClick:null==d?void 0:d.handleAvatarClick})):null,a().createElement("span",{onClick:null==d?void 0:d.handleUsernameClick},U.name),a().createElement(T.U,{rotate:180})),D&&F?a().createElement("div",{className:qe},a().createElement(F,null)):a().createElement("div",{className:w()($e,(e={},at(e,We,!f),at(e,He,f),e)),"data-marker":"header/username-tooltip"},a().createElement(xe,{currentPage:m,handlers:{handleProClick:null==d?void 0:d.handleProfilePopupProClick,handleMessengerClick:null==d?void 0:d.handleProfilePopupMessengerClick,handleMortgageAccountLinkClick:null==d?void 0:d.handleMortgageAccountLinkClick},headerInfo:i,hierarchy:c,unreadMessengerCount:M,unreadFavoritesCount:S,unreadNotificationsCount:R,userAccount:l,user:U,host:h,isOpened:W,isSpaEnabled:b,ProfileSwitchComponent:V}))):null},q=function(){var e,t=w()(Le,C,(at(e={},nt,g&&!E),at(e,Ye,E),at(e,Ke,y),e));return a().createElement(x.D,null,a().createElement(O.f,null,a().createElement("div",{className:t,"data-marker":"header/navbar"},a().createElement("div",{className:ze},a().createElement("ul",{className:Te},a().createElement("li",{className:Me},a().createElement("a",{className:Re,href:"".concat(h,"/business"),onClick:null==d?void 0:d.handleBusinessClick},"Для бизнеса")),(null==U?void 0:U.hasAvitoPro)&&a().createElement("li",{className:Me},a().createElement("a",{className:Re,href:"//pro.avito.ru",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleProClick},"Авито Pro")),a().createElement("li",{className:Me},a().createElement("a",{className:Re,href:"//career.avito.com/?utm_source=avito.ru&utm_medium=referral&utm_campaign=test_placement_to_career&utm_content=top_vacancy",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleLinkClick},"Вакансии")),a().createElement("li",{className:Me},a().createElement("a",{className:Re,href:"//support.avito.ru",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleLinkClick},"Помощь")),null!=o&&o.length?a().createElement(rt,{catalogs:o,onClick:null==d?void 0:d.handleLinkClick}):null,Z&&a().createElement("li",{className:Me},a().createElement("a",{className:Re,href:"/avito-care?from=mp_header",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleLinkClick},"Польза"))),J(),U?a().createElement("a",{className:w()(Re,Ve),href:"".concat(h,"/profile"),onClick:null==d?void 0:d.handleMyItemsClick},"Мои объявления"):null,$(),U?null:a().createElement("a",{className:w()(Re,Fe),href:"#login?authsrc=h","data-marker":"header/login-button",onClick:null==d?void 0:d.handleLoginClick},"Вход и регистрация"),function(){if(!f)return null;var e="".concat(h,"/additem");return U||(e="#login?next=".concat(encodeURIComponent(e),"&authsrc=ca")),!h&&U&&b?a().createElement("div",{className:Xe},a().createElement(N.Link,{to:e,component:A.z,size:"s",preset:"accent",onClick:null==d?void 0:d.handleAddClick},n)):a().createElement("div",{className:Xe},a().createElement(A.z,{href:e,size:"s",preset:"accent",onClick:null==d?void 0:d.handleAddClick},n))}()))))};return k?a().createElement("div",{className:je},q()):q()},ct=a().memo(it),st=["hasAddButton","page","pageType","counters","header","isSpaEnabled","user","cartCount","profileCount"];function ut(){return ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ut.apply(this,arguments)}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ft(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var pt="is-cart-onboarding-label",ht=function(e){var t,n,a=e.hasAddButton,l=void 0===a||a,o=e.page,i=e.pageType,c=e.counters,s=void 0===c?0:c,u=e.header,m=e.isSpaEnabled,d=e.user,f=e.cartCount,p=e.profileCount,h=ft(e,st),v=mt(r.useState(!1),2),g=v[0],E=v[1];r.useEffect((function(){Boolean(localStorage.getItem(pt))||E(!0)}),[]);var N=function(e){if(e&&e.target){var t=e.target.innerText;t&&k.Z.sendEvent(7839,3,{from_page:i,link_button:t,block_type:"header"})}};return r.createElement(ct,ut({},h,{cartCount:f,profileCount:p,currentPage:o,handlers:{handleAddClick:function(){k.Z.sendEvent(2812,0,{pagetype:o}),d||k.Z.sendEvent(330,1,{pagetype:o})},handleAvatarClick:function(){k.Z.sendEvent(2811,0,{from_block:0,pagetype:o})},handleBusinessClick:function(e){b.Z.push({event:"gtm.generalEvent",eventCategory:null!=d&&d.isLegal?"verified":"funnel",eventAction:"create_shop",eventLabel:"header_link",eventValue:"value"}),k.Z.sendEvent(2811,0,{pagetype:o}),N(e)},handleCartClick:function(){k.Z.sendEvent(4647,4,{block_items_display:f,srcp:"header"}),localStorage.setItem(pt,"true")},handleFavoritesClick:function(){k.Z.sendEvent(2818,0,{pagetype:o})},handleItemsClick:function(){k.Z.sendEvent(2814,0,{pagetype:o})},handleLoginClick:function(){k.Z.sendEvent(3229,0)},handleMessengerClick:function(){k.Z.sendEvent(3184,0,{s:"top_menu"})},handleMortgageAccountLinkClick:function(){k.Z.sendEvent(6918,0,{})},handleMyItemsClick:function(){k.Z.sendEvent(2814,0,{pagetype:o})},handleProClick:function(e){k.Z.sendEvent(3431,1,{from:"header"}),N(e)},handleProfilePopupProClick:function(){localStorage.setItem(C,"1"),k.Z.sendEvent(3431,1,{from:"headerTooltip"}),k.Z.sendEvent(6577,1,{from_type:"header_sheet"})},handleProfilePopupMessengerClick:function(){k.Z.sendEvent(3184,0,{s:"profile_menu"})},handleUsernameClick:function(){k.Z.sendEvent(2811,0,{from_block:1,pagetype:o})},handleSecuredTouchLogout:function(){(0,y.k)()},handleLinkClick:N},headerInfo:{rating:null==u||null===(t=u.headerInfo)||void 0===t?void 0:t.rating,experiments:null==u||null===(n=u.headerInfo)||void 0===n?void 0:n.experiments},hierarchy:u.hierarchy,isCartOnboarding:g,catalogs:u.catalogs,isSpaEnabled:m,hasAddButton:l,unreadFavoritesCount:s,user:d,userAccount:u.userAccount}))},vt=["hasAddButton","pageId","pageType","isSpaEnabled","showProfileOrderBadge","children","ProfileSwitchComponent"];function gt(){return gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var bt="@avito/app-nc:read-notification",Ct=function(e){var t=e.hasAddButton,n=void 0===t||t,a=e.pageId,d=e.pageType,f=e.isSpaEnabled,p=e.showProfileOrderBadge,h=e.children,v=e.ProfileSwitchComponent,g=kt(e,vt),y=Et(r.useState(c.Z.get()),2),k=y[0],b=y[1],C=Et(r.useState(0),2),N=C[0],S=C[1],w=(0,l.r)(),_=(0,o.$)().header,I=(0,i.a)(),A=(0,s.i)(I),x=p?(0,u.A)(I):0;return r.useEffect((function(){return I&&c.Z.subscribe(b),function(){c.Z.unsubscribe(b)}}),[I]),r.useEffect((function(){var e,t;return I&&(e=new E({currentPage:a,userId:I.id,updateUI:function(e){S(e)}}),t=e.fetchCounterData.bind(e),m.Ld(bt,t,!0)),function(){I&&m.r1(bt,t)}}),[I,a]),r.createElement(r.Fragment,null,h,r.createElement(ht,gt({},g,{cartCount:A,profileCount:x,hasAddButton:n,counters:w.total,header:_,isSpaEnabled:f,user:I,unreadMessengerCount:k,unreadNotificationsCount:N,page:a,pageType:d,servicesClassName:"header-services",ProfileSwitchComponent:v})))}}}]);